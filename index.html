<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function getComputerChoice () {
            let rand = 3 * Math.random();

            if (rand <= 1) return "rock";
            else if (rand <= 2) return "paper";
            return "scissors";
        }

        function playRound (playerSelection, computerSelection) { 
            let player = (playerSelection != null) ? playerSelection.toLowerCase() : "";
            let computer = computerSelection.toLowerCase();
            let playerWin = null;

            if (player != computer) {
                switch (player) {
                case "rock":
                    switch (computer) {
                    case "paper":  playerWin = false; break;
                    case "scissors": playerWin = true; break;
                    default: console.log("ERROR: Invalid computer choice!");
                    }
                    break;

                case "paper":
                    switch (computer) {
                    case "rock": playerWin = true; break;
                    case "scissors": playerWin = false; break;
                    default: console.log("ERROR: Invalid computer choice!");
                    }
                    break;

                case "scissors":
                    switch (computer) {
                    case "rock": playerWin = false; break;
                    case "paper": playerWin = true; break;
                    default: console.log("ERROR: Invalid computer choice!");
                    }
                    break;
                    
                default: console.log("ERROR: Invalid player choice!");
                }
            }

            return playerWin;
        }

        function printMsg (playerWin, player, computer) {
            switch (playerWin) {
                case true:
                    console.log(`You Win! ${player} beats ${computer}`); 
                    break;
                case false: 
                    console.log(`You Lose! ${computer} beats ${player}`);
                    break;
                case null: 
                    console.log(`Try again! ${player} ties ${computer}`); 
            }
        }

        function game () {
            let playerScore = 0;
            let computerScore = 0;
            let roundsPlayed = 0;

            while (roundsPlayed < 5) {
                let playerChoice = prompt("Enter your move (rock/paper/scissors): ", "");
                let computerChoice = getComputerChoice();

                let playerWin = playRound(playerChoice, computerChoice);

                printMsg(playerWin, playerChoice, computerChoice);

                switch (playerWin) {
                    case true: 
                        playerScore++;
                        roundsPlayed++;
                        break;

                    case false:
                        computerScore++;
                        roundsPlayed++;
                        break;
                    default:
                        break;
                }
            }

            if (playerScore > computerScore) {
                console.log(`You win the game! (${playerScore}-${computerScore})`);
            }
            else if(playerScore < computerScore) {
                console.log(`You lose the game! (${playerScore}-${computerScore})`);
            }
            else {
                console.log(`Something went wrong! (${playerScore}-${computerScore}`);
            }
        }

        //POTENTIAL TODO: Implement full R / P / S / Lizard / Spock :)
    </script>
</body>
</html>